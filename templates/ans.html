<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="{{ url_for('static',filename='/css/style.css') }}">
  <title>PersonalMake診断</title>
</head>

<body>
  <div class="contents">
    <header>
      <p id="subTitle">あなたにあったスタイルを提案します！</p>
      <p id="mainTitle">Personal make-up</p>
    </header>

    <p id="ansName">あなたの顔の輪郭は「<span id="name">{{kname}}</span>型」です。</p>
    <p id="ansName">パーソナルカラーは「<span id="name">{{pname}}</span>」です。</p>

    <div id="canvasArea">
    <canvas id="pkChart"></canvas>
    <p id="chartText">あなたは{{km}}％で{{kname}}です。</p>
    </div>
    <div id="canvasArea">
    <canvas id="ppChart"></canvas>
    <p id="chartText">あなたは{{pm}}％で{{pname}}です。</p>
    </div>

    <div class="circles">
      <p class="spring"></p>
      <p class="summer"></p>
      <p class="autumn"></p>
      <p class="winter"></p>
    </div>

    <div id="advice">
    <p id="ansText">{{kname}}型さんは、</p>
    <div id="pkResult">
    </div>
    </div>
    <div id="advice">
    <p id="ansText">{{pname}}タイプ</p>
    <div id="ppResult">
    </div>
    </div>

    <div id="ansBtn">
      <div class="btns" id="twitter">
        <!--<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large"
          data-text="診断してみました！%0A私が診断された顔の輪郭は{{kname}}型で、パーソナルカラーは{{pname}}でした!" data-hashtags="サマーハッカソン" data-related="" data-show-count="false">Tweet</a>-->
        <a href="https://twitter.com/share?url=https%3A%2F%2Fpmup.herokuapp.com%2F&text=%E8%A8%BA%E6%96%AD%E3%81%97%E3%81%A6%E3%81%BF%E3%81%BE%E3%81%97%E3%81%9F%EF%BC%81%0A%E7%A7%81%E3%81%8C%E8%A8%BA%E6%96%AD%E3%81%95%E3%82%8C%E3%81%9F%E9%A1%94%E3%81%AE%E8%BC%AA%E9%83%AD%E3%81%AF{{kname}}%E5%9E%8B%E3%81%A7%E3%80%81%E3%83%91%E3%83%BC%E3%82%BD%E3%83%8A%E3%83%AB%E3%82%AB%E3%83%A9%E3%83%BC%E3%81%AF{{pname}}%E3%81%A7%E3%81%97%E3%81%9F!&hashtags=%E3%82%B5%E3%83%9E%E3%83%BC%E3%83%8F%E3%83%83%E3%82%AB%E3%82%BD%E3%83%B3"
          target="_blank" class="twitter-share-button">Tweet</a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      </div>
      <form action="/ans" method="post">
        <input type="submit" value="もう一度あそぶ" class="btns">
      </form>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/actList.js') }}"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script>
    window.onload = function getMakeData() {
      //ここで結果を受け取り、任意の変数に代入する

      var pkAns = '{{kname}}';
      var ppAns = '{{pname}}';

      //$.getJSON('actData.json', function (data) {
      $.getJSON("/js/makeData.json", function (data) {
        //↓actDataの配列内を検索
        for (var i = 0; i < Object.keys(data.makeData).length; i++) {
          //↓結果と一致するnameの各データを取得し、画面に出力する

          if (pkAns == data.makeData[i].pkName) {

            var parent = document.getElementById("pkResult");
            var p = document.createElement("p");
            p.innerHTML = data.makeData[i].summary;
            parent.appendChild(p);

          }

          if (ppAns == data.makeData[i].ppName) {

            var parent = document.getElementById("ppResult");
            var p = document.createElement("p");
            p.innerHTML = data.makeData[i].summary;
            parent.appendChild(p);

          }
        }
      })
    }
  </script>

  <script>

    var ctx = document.getElementById('pkChart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['丸', '面長', '逆三角', '四角', '卵'],
        datasets: [{
          backgroundColor: ['rgb(241,158,194)', 'rgb(255,231,63)', 'rgb(246,173,60)', 'rgb(135,202,178)', 'rgb(64,124,192)'],
          data: ['{{pk1}}', '{{pk2}}', '{{pk3}}', '{{pk4}}', '{{pk5}}']

        }]
      },
      options: {
      }
    });

  </script>

  <script>

    var ctx = document.getElementById('ppChart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['夏', '冬', '春', '秋'],
        datasets: [{
          backgroundColor: ['rgb(23,120,255)', 'rgb(80,186,0)', 'rgb(255,105,180)', 'rgb(255,143,23)'],
          data: ['{{pp1}}', '{{pp2}}', '{{pp3}}', '{{pp4}}']

        }]
      },
      options: {}
    });

  </script>
</body>

</html>